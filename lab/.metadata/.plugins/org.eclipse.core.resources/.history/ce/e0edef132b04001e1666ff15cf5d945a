<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<html>
<head>
<link href="style.css" rel="stylesheet" type="text/css">
<title>수강신청 삭제</title>
</head>
<body>
<%@include file="user.jsp"%>
	<%@ include file="top.jsp"%>
	<%
	if (session_id == null)
		response.sendRedirect("login.jsp");
	
	
	int nTotalCourse = 0;
	int nTotalUnit = 0;
	
	%>
	<br>
	<br>
	<br>
	<table width="70%" align="center" class = "deleteTable" border >
		<br>
		<tr>
			<th>과목번호</th>
			<th>분반</th>
			<th>과목명</th>
			<!-- <th>학년도</th>
			<th>학기</th> -->
			<!-- <th>요일</th> -->
			<th>시간</th>
			<th>교수</th>
			<!-- <th>재수강 여부</th> -->
			<th>수강취소</th>
		</tr>
		<%
		Connection myConn = null;
		Statement stmt = null;
		ResultSet myResultSet = null;
		String mySQL = "";
		String dburl = "jdbc:oracle:thin:@localhost:1521:xe";
		String user = "kimminjoo";
		String passwd = "1234";
		String dbdriver = "oracle.jdbc.driver.OracleDriver";

		try {
			Class.forName(dbdriver);
			myConn = DriverManager.getConnection(dburl, user, passwd);
			stmt = myConn.createStatement();
		} catch (SQLException ex) {
			System.err.println("SQLException: " + ex.getMessage());
		}
		int nYear = 0;
		int nSemester = 0;
		/* mySQL = "select e.c_id, e.c_id_no, c.c_name, t_time from enroll e, course c, teach t where e.s_id='"
				+ session_id
				+ "' and e.c_id = c.c_id and e.c_id_no = c.c_id_no and t.c_id = c.c_id and t.c_id_no = c.c_id_no and t_year = e_year and t_semester = e_semester and e_year = ? and e_semester = ?";
		myResultSet = stmt.executeQuery(mySQL); */
		System.out.println(session_id);
		mySQL = "select distinct e.c_id, e.c_id_no, c.c_name, t_time, p_name from enroll e, course c, teach t, professor p where e.s_id='"
				+ session_id
				+ "' and p.p_id = t.p_id and e.c_id = t.c_id and e.c_id_no = t.c_id_no and c.c_id = e.c_id and c.c_id_no = e.c_id_no and t.c_id = c.c_id and t.c_id_no = c.c_id_no and e.e_year = 23 and e.e_semester = 2";
		myResultSet = stmt.executeQuery(mySQL);

		if (myResultSet != null) {
			while (myResultSet.next()) {
				String c_id = myResultSet.getString("c_id");
				int c_id_no = myResultSet.getInt("c_id_no");
				String c_name = myResultSet.getString("c_name");
				/* int e_year = myResultSet.getInt("e_year");
				int e_semester = myResultSet.getInt("e_semester"); */
				/* String e_again = myResultSet.getString("e_again"); */
				/* String again_check = "";
				if (e_again.equals("1"))
			again_check = "o";
				else
			again_check = "x"; */
				/* String t_date = myResultSet.getString("t_date"); */
				String t_time = myResultSet.getString("t_time");
				String p_name = myResultSet.getString("p_name");
		%>

		<tr>
			<td><%=c_id%></td>
			<td><%=c_id_no%></td>
			<td><%=c_name%></td>
			<%-- <td><%=e_year%></td>
			<td><%=e_semester%></td> --%>
			<%-- <td><%=t_date%></td> --%>
			<td><%=t_time%></td>
			<td><%=p_name%></td>
			<%-- <td><%=again_check%></td> --%>
			<td><a id="Wcolor"
				href="delete_verify.jsp?c_id=<%=c_id%>&c_id_no=<%=c_id_no%>">
					취소 </a></td>
		</tr>
		<%
}
}
stmt.close(); myConn.close();
%>
	</table>
	
	<div id="CountInfo" align="center" style="font-weight: bold;">
        수강신청한 강의 수 : <%=nTotalCourse%>개 &nbsp;&nbsp;&nbsp; 누적 학점 수 : <%=nTotalUnit%>학점
    </div>
</body>
</html>